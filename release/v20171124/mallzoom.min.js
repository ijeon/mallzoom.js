/* mallzoom.js v20171124 / GPLv3 / Inpyo Jeon / inpyodev@gmail.com */ !function(t){t.fn.mallzoom=function(e){function s(t,i){var e=Z.innerWidth(),s=w/e,n=t*s,o=i*s;U.css({width:w*s,height:C*s,top:-n,left:-o}),V.each(g)}function n(t){Z.add(R).addClass("_active"),a(t),$.show(),et=setTimeout(function(){$.fadeOut(400)},O)}function o(t){Z.css({width:w/2,height:C/2}),Z.add(R).removeClass("_active"),clearTimeout(et),et=0}function a(t){r(t);var i=parseInt(Z.css("border-top-width")),e=Z.innerWidth(),n=Z.innerHeight(),o=it-Z.innerHeight()/2,a=tt-Z.innerWidth()/2;0>o&&(o=0),o>C-n&&(o=C-n),0>a&&(a=0),a>w-e&&(a=w-e),Z.css({top:o-i,left:a-i}),Q.css({top:-o,left:-a}),s(o,a)}function d(t){var i=E?-1*t.originalEvent.wheelDelta:t.originalEvent.wheelDelta,e=Z.innerWidth(),s=Z.innerHeight();return i>0?e*S>w/z?(e*=S,s*=S):(e=w/z,s=C/z):w>e*P?(e*=P,s*=P):(e=w,s=C),Z.css({width:e,height:s}),a(t),!1}function r(t){var i=L.offset().top,e=L.offset().left;tt=t.pageX-e,it=t.pageY-i}function c(){v.addClass("_loaded"),M.add(K).each(g),l(),p(W)}function l(){for(i=0;i<M.length;i++)F[i]={cloneWidth:M.eq(i).css("width"),cloneHeight:M.eq(i).css("height"),cloneTop:M.eq(i).css("top"),cloneLeft:M.eq(i).css("left")}}function h(){var i=j.length>0?'<p class="_txt_notice">'+j+"</p>":"",e='<div class="_frm_input"></div><div class="_frm_overlay"></div><div class="_frm_magnifier"><div class="_frm_in_magnifier"><img class="_img_magnifier" src=""></div></div><div class="_frm_thumbnail"><a class="_nav_thumbnail_prev" href="javascript:;"></a><a class="_nav_thumbnail_next" href="javascript:;"></a><div class="_frm_in_thumbnail"><ul></ul></div></div><div class="_frm_output">'+i+'<div class="_frm_in_output"><img class="_img_output" src=""></div></div>';v.append(e).find("> img").addClass("_img_input").appendTo(v.find("._frm_input")).each(function(){v.find("._frm_in_thumbnail > ul").append('<li class="_wrap_thumbnail"><img class="_img_thumbnail" src="'+(t(this).data("thumbsrc")?t(this).data("thumbsrc"):t(this).attr("src"))+'"></li>')});for(var s=0;s<H.length;s++)v.find("._frm_overlay").append('<img class="_img_overlay _ioid_'+s+'" src="'+H[s]+'">');for(var s=0;T>s;s++)v.find("._wrap_thumbnail").eq(s).addClass("_showing")}function m(){var t,i,e,s,n,o,a,d=parseInt(v.css("border-top-width")),r=v.css("border-top-color"),c=v.css("border-top-style"),l=v.css("background-color"),h=(parseInt(Z.css("border-top-width")),parseInt(B.css("border-top-width"))),m=0,_=0,f=-d,p=-d,g=parseInt(G.css("width")),u=parseInt(G.css("height")),b=parseInt(G.css("border-top-width")),q=!D&&M.length>T?2*q:0;if(j.length>0){var H=parseInt($.css("padding-left"));$.addClass("_"+k),$.css({width:w-2*H})}L.add(Q).add(R).add(U).css({width:w,height:C,backgroundColor:l}),Y.addClass("_"+y),R.addClass("_"+x),"top"==y||"bottom"==y?(q=D&&M.length<=T?0:parseInt(Y.css("padding-left")),t=w+2*d-2*q,o=parseInt(B.css("margin-right")),s=(t-o*(T-1)-h*T*2)/T,n=s/I,i=n+2*h,u=n-2*b+2*h,_=-d,"top"==y?(e=parseInt(Y.css("padding-bottom")),m=-(i+e+d)):(e=parseInt(Y.css("padding-top")),m=C+d)):(q=D&&M.length<=T?0:parseInt(Y.css("padding-top")),i=C+2*d-2*q,o=parseInt(B.css("margin-bottom")),n=(i-o*(T-1)-h*T*2)/T,s=n*I,t=s+2*h,g=s-2*b+2*h,m=-d,"left"==y?(e=parseInt(Y.css("padding-right")),_=-(t+e+d)):(e=parseInt(Y.css("padding-left")),_=w+d)),"top"==x?(a=parseInt(R.css("margin-bottom")),f=-(a+d)):"bottom"==x?(a=parseInt(R.css("margin-top")),f=C+d):"left"==x?(a=parseInt(R.css("margin-right")),p=-(a+d+w)):(a=parseInt(R.css("margin-left")),p=w+d),Y.css({width:t,height:i,top:m,left:_}),B.css({width:s,height:n,backgroundColor:l}),R.css({top:f,left:p,borderWidth:d,borderColor:r,borderStyle:c}),Z.css({width:w/2,height:C/2}),G.add(J).css({width:g,height:u}),D&&M.length<=T&&Y.addClass("_hideComponent");var W=parseInt(v.css("margin-"+y)),z="top"==y||"bottom"==y?i+e:t+e;v.css("margin-"+y,W+z)}function _(){p(t(this).index())}function f(){var i=t(this),e="top"==y||"bottom"==y?B.eq(W-1).position().left:B.eq(W-1).position().top,s="top"==y||"bottom"==y?B.eq(W+2-T).position().left:B.eq(W+2-T).position().top;i.hasClass("_nav_thumbnail_prev")?W>0&&(B.eq(W-1).hasClass("_showing")||("top"==y||"bottom"==y?A.find("ul").css({left:-e}):A.find("ul").css({top:-e}),B.eq(W-1).addClass("_showing"),B.eq(W-1+T).removeClass("_showing")),p(W-1)):W<M.length-1&&(B.eq(W+1).hasClass("_showing")||("top"==y||"bottom"==y?A.find("ul").css({left:-s}):A.find("ul").css({top:-s}),B.eq(W+1).addClass("_showing"),B.eq(W+1-T).removeClass("_showing")),p(W+1))}function p(t){M.eq(t).add(B.eq(t)).addClass("_active").siblings().removeClass("_active"),V.add(X).attr("src",M.eq(t).attr("src")).css({width:F[t].cloneWidth,height:F[t].cloneHeight,top:F[t].cloneTop,left:F[t].cloneLeft}),0==t?G.addClass("_deactive"):G.removeClass("_deactive"),t==M.length-1?J.addClass("_deactive"):J.removeClass("_deactive"),W=t}function g(){var i=t(this),e=u(i[0]).width,s=u(i[0]).height,n=e/s,o=i.parent().innerWidth(),a=i.parent().innerHeight(),d=o/a;i.css({top:0,left:0,width:"auto",height:"auto"}),"fit"==q&&n>d||"cover"==q&&d>n?i.css({width:o,top:(a-o/n)/2}):i.css({height:a,left:(o-a*n)/2})}function u(t){var i=new Image;return i.src=t.src,{width:i.width,height:i.height}}var v=t(this).addClass("mallzoom_object"),b=t.extend({imageFitType:"fit",thumbPosition:"bottom",thumbCount:5,outputPosition:"right",imageOverlay:[],zoomScale:.05,zoomMaximum:5,noticeText:"",noticePosition:"bottom",noticeShowTime:2,autoHideNav:!1,reverseZoom:!1},e),w=v.innerWidth(),C=v.innerHeight(),I=w/C,q=b.imageFitType,y=b.thumbPosition,T=b.thumbCount,x=b.outputPosition,H=b.imageOverlay,W=0,z=b.zoomMaximum,P=1+b.zoomScale,S=1-b.zoomScale,j=b.noticeText,k=b.noticePosition,O=1e3*b.noticeShowTime,D=b.autoHideNav,E=b.reverseZoom,F=[];h();var L=v.find("._frm_input"),M=v.find("._img_input"),N=v.find("._frm_overlay"),Z=(v.find("._img_overlay"),v.find("._frm_magnifier")),Q=v.find("._frm_in_magnifier"),X=v.find("._img_magnifier"),Y=v.find("._frm_thumbnail"),A=v.find("._frm_in_thumbnail"),B=v.find("._wrap_thumbnail"),G=v.find("._nav_thumbnail_prev"),J=v.find("._nav_thumbnail_next"),K=v.find("._img_thumbnail"),R=v.find("._frm_output"),U=v.find("._frm_in_output"),V=v.find("._img_output"),$=v.find("._txt_notice");v.find("._vid_overlay");m();var tt,it,et=0;return t(window).on("load",c),B.on("mouseenter",_),G.add(J).on("click",f),N.on("mouseenter",n),Z.add(v).on("mouseleave",o),Z.on("mousemove",a),Z.on("mousewheel",d),this}}(jQuery);