/* mallzoom.js v20171120 / GPLv3 / Inpyo Jeon / inpyodev@gmail.com */ !function(t){t.fn.mallzoom=function(i){function s(t,i){var s=N.innerWidth(),n=v/s,e=t*n,a=i*n;K.css({width:v*n,height:b*n,top:-e,left:-a}),L.each(f)}function n(t){N.add(J).addClass("_active"),a(t),R.show(),tt=setTimeout(function(){R.fadeOut(400)},j)}function e(t){N.css({width:v/2,height:b/2}),N.add(J).removeClass("_active"),clearTimeout(tt),tt=0}function a(t){d(t);var i=parseInt(N.css("border-top-width")),n=N.innerWidth(),e=N.innerHeight(),a=V-N.innerHeight()/2,o=U-N.innerWidth()/2;0>a&&(a=0),a>b-e&&(a=b-e),0>o&&(o=0),o>v-n&&(o=v-n),N.css({top:a-i,left:o-i}),D.css({top:-a,left:-o}),s(a,o)}function o(t){var i=N.innerWidth(),s=N.innerHeight();return t.originalEvent.wheelDelta>0?i*W>v/z?(i*=W,s*=W):(i=v/z,s=b/z):v>i*H?(i*=H,s*=H):(i=v,s=b),N.css({width:i,height:s}),a(t),!1}function d(t){U=t.pageX-$,V=t.pageY-Z}function r(){u.addClass("_loaded"),F.add(G).each(f),_(T)}function c(){var i=P.length>0?'<p class="_txt_notice">'+P+"</p>":"",s='<div class="_frm_input"></div><div class="_frm_overlay"></div><div class="_frm_magnifier"><div class="_frm_in_magnifier"><img class="_img_magnifier" src=""></div></div><div class="_frm_thumbnail"><a class="_nav_thumbnail_prev" href="javascript:;"></a><a class="_nav_thumbnail_next" href="javascript:;"></a><div class="_frm_in_thumbnail"><ul></ul></div></div><div class="_frm_output">'+i+'<div class="_frm_in_output"><img class="_img_output" src=""></div></div>';u.append(s).find("> img").addClass("_img_input").appendTo(u.find("._frm_input")).each(function(){u.find("._frm_in_thumbnail > ul").append('<li class="_wrap_thumbnail"><img class="_img_thumbnail" src="'+(t(this).data("thumbsrc")?t(this).data("thumbsrc"):t(this).attr("src"))+'"></li>')});for(var n=0;n<x.length;n++)u.find("._frm_overlay").append('<img class="_img_overlay _ioid_'+n+'" src="'+x[n]+'">');for(var n=0;q>n;n++)u.find("._wrap_thumbnail").eq(n).addClass("_showing")}function h(){var t,i,s,n,e,a,o,d=parseInt(u.css("border-top-width")),r=u.css("border-top-color"),c=u.css("border-top-style"),h=u.css("background-color"),l=(parseInt(N.css("border-top-width")),parseInt(Y.css("border-top-width"))),m=0,_=0,f=-d,p=-d,g=parseInt(A.css("width")),C=parseInt(A.css("height")),x=parseInt(A.css("border-top-width")),T=!k&&F.length>q?2*T:0;if(P.length>0){var z=parseInt(R.css("padding-left"));R.addClass("_"+S),R.css({width:v-2*z})}O.add(D).add(J).add(K).css({width:v,height:b,backgroundColor:h}),Q.addClass("_"+I),J.addClass("_"+y),"top"==I||"bottom"==I?(T=k&&F.length<=q?0:parseInt(Q.css("padding-left")),t=v+2*d-2*T,a=parseInt(Y.css("margin-right")),n=(t-a*(q-1)-l*q*2)/q,e=n/w,i=e+2*l,C=e-2*x+2*l,_=-d,"top"==I?(s=parseInt(Q.css("padding-bottom")),m=-(i+s+d)):(s=parseInt(Q.css("padding-top")),m=b+d)):(T=k&&F.length<=q?0:parseInt(Q.css("padding-top")),i=b+2*d-2*T,a=parseInt(Y.css("margin-bottom")),e=(i-a*(q-1)-l*q*2)/q,n=e*w,t=n+2*l,g=n-2*x+2*l,m=-d,"left"==I?(s=parseInt(Q.css("padding-right")),_=-(t+s+d)):(s=parseInt(Q.css("padding-left")),_=v+d)),"top"==y?(o=parseInt(J.css("margin-bottom")),f=-(o+d)):"bottom"==y?(o=parseInt(J.css("margin-top")),f=b+d):"left"==y?(o=parseInt(J.css("margin-right")),p=-(o+d+v)):(o=parseInt(J.css("margin-left")),p=v+d),console.log(v),Q.css({width:t,height:i,top:m,left:_}),Y.css({width:n,height:e,backgroundColor:h}),J.css({top:f,left:p,borderWidth:d,borderColor:r,borderStyle:c}),N.css({width:v/2,height:b/2}),A.add(B).css({width:g,height:C}),k&&F.length<=q&&Q.addClass("_hideComponent");var H=parseInt(u.css("margin-"+I)),W="top"==I||"bottom"==I?i+s:t+s;u.css("margin-"+I,H+W)}function l(){_(t(this).index())}function m(){var i=t(this),s="top"==I||"bottom"==I?Y.eq(T-1).position().left:Y.eq(T-1).position().top,n="top"==I||"bottom"==I?Y.eq(T+2-q).position().left:Y.eq(T+2-q).position().top;i.hasClass("_nav_thumbnail_prev")?T>0&&(Y.eq(T-1).hasClass("_showing")||("top"==I||"bottom"==I?X.find("ul").css({left:-s}):X.find("ul").css({top:-s}),Y.eq(T-1).addClass("_showing"),Y.eq(T-1+q).removeClass("_showing")),_(T-1)):T<F.length-1&&(Y.eq(T+1).hasClass("_showing")||("top"==I||"bottom"==I?X.find("ul").css({left:-n}):X.find("ul").css({top:-n}),Y.eq(T+1).addClass("_showing"),Y.eq(T+1-q).removeClass("_showing")),_(T+1))}function _(t){F.eq(t).add(Y.eq(t)).addClass("_active").siblings().removeClass("_active"),L.add(E).attr("src",F.eq(t).attr("src")).each(f),0==t?A.addClass("_deactive"):A.removeClass("_deactive"),t==F.length-1?B.addClass("_deactive"):B.removeClass("_deactive"),T=t}function f(){var i=t(this),s=p(i[0]).width,n=p(i[0]).height,e=s/n,a=i.parent().innerWidth(),o=i.parent().innerHeight(),d=a/o;i.css({top:0,left:0,width:"auto",height:"auto"}),"fit"==C&&e>d||"cover"==C&&d>e?i.css({width:a,top:(o-a/e)/2}):i.css({height:o,left:(a-o*e)/2})}function p(t){var i=new Image;return i.src=t.src,{width:i.width,height:i.height}}var u=t(this).addClass("mallzoom_object"),g=t.extend({imageFitType:"fit",thumbPosition:"bottom",thumbCount:5,outputPosition:"right",imageOverlay:[],zoomScale:.05,zoomMaximum:5,noticeText:"",noticePosition:"bottom",noticeShowTime:2,autoHideNav:!1},i),v=u.innerWidth(),b=u.innerHeight(),w=v/b,C=g.imageFitType,I=g.thumbPosition,q=g.thumbCount,y=g.outputPosition,x=g.imageOverlay,T=0,z=g.zoomMaximum,H=1+g.zoomScale,W=1-g.zoomScale,P=g.noticeText,S=g.noticePosition,j=1e3*g.noticeShowTime,k=g.autoHideNav;c();var O=u.find("._frm_input"),F=u.find("._img_input"),M=u.find("._frm_overlay"),N=(u.find("._img_overlay"),u.find("._frm_magnifier")),D=u.find("._frm_in_magnifier"),E=u.find("._img_magnifier"),Q=u.find("._frm_thumbnail"),X=u.find("._frm_in_thumbnail"),Y=u.find("._wrap_thumbnail"),A=u.find("._nav_thumbnail_prev"),B=u.find("._nav_thumbnail_next"),G=u.find("._img_thumbnail"),J=u.find("._frm_output"),K=u.find("._frm_in_output"),L=u.find("._img_output"),R=u.find("._txt_notice");h();var U,V,Z=O.offset().top,$=O.offset().left,tt=0;return t(window).on("load",r),Y.on("mouseenter",l),A.add(B).on("click",m),M.on("mouseenter",n),N.add(u).on("mouseleave",e),N.on("mousemove",a),N.on("mousewheel",o),this}}(jQuery);